(this["webpackJsonppart2_phonebook_2.5_2.10"]=this["webpackJsonppart2_phonebook_2.5_2.10"]||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=[{name:"Arto Hellas",number:"040-123456"},{name:"Ada Lovelace",number:"39-44-5323523"},{name:"Dan Abramov",number:"12-43-234345"},{name:"Mary Poppendieck",number:"39-23-6423122"}],o=t(14),i=t.n(o),u=(t(19),t(3)),s=t(0),l=function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.number}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{name:e.id,onClick:e.handleClick,children:"Delete"})})]})},d=function(e){var n=e.persons,t=e.searchedPhones,r=e.isSearching,a=e.handleClick;return Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:r?t.map((function(e){return Object(s.jsx)(l,{name:e.name,number:e.number,id:e.id,handleClick:a},"".concat(e.name,"_").concat(e.number))})):n.map((function(e){return Object(s.jsx)(l,{name:e.name,number:e.number,id:e.id,handleClick:a},"".concat(e.name,"_").concat(e.number))}))})})},b=function(e){return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{type:"text",onChange:e.handleSearch,onKeyUp:e.handleKeyUp,value:e.stringToSearch,name:"strToSearch"})]})},h=function(e){return Object(s.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:e.handleChange,value:e.newName,name:"name"}),"number: ",Object(s.jsx)("input",{onChange:e.handleChange,value:e.newNumber,name:"number"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},j=function(e){var n=e.noti;return console.log(n),!1===n.display?null:Object(s.jsx)("div",{className:"Notification-block",style:{borderRadius:"0.5em",border:"solid 2px ".concat(n.error?"red":"green"),backgroundColor:"".concat(n.error?"#FD8181":"lightgreen"),display:"block",width:"300px",alignItems:"center"},children:Object(s.jsx)("p",{className:"Notification-text",style:{color:n.error?"red":"green",fontWeight:300,textAlign:"center"},children:n.msj})})},m=t(4),f=t.n(m),p="/api/persons",O=function(){return f.a.get(p)},x=function(e){return f.a.post(p,e)},g=function(e){return f.a.delete("".concat(p,"/").concat(e))},v=function(e,n){return f.a.put("".concat(p,"/").concat(e),n)},y=function(e){var n=Object(r.useState)([]),t=Object(u.a)(n,2),a=t[0],c=t[1],o=Object(r.useState)(""),i=Object(u.a)(o,2),l=i[0],m=i[1],f=Object(r.useState)(""),p=Object(u.a)(f,2),y=p[0],w=p[1],S=Object(r.useState)(""),k=Object(u.a)(S,2),C=k[0],N=k[1],D=Object(r.useState)([]),_=Object(u.a)(D,2),A=_[0],T=_[1],P=Object(r.useState)(!1),E=Object(u.a)(P,2),K=E[0],U=E[1],I=Object(r.useState)({msj:"Default msg",display:!1,error:!1}),J=Object(u.a)(I,2),M=J[0],R=J[1];Object(r.useEffect)((function(){O().then((function(e){c(e.data)})).catch((function(e){console.log("Cant resolve persons")}))}),[]);var B=function(e,n){R({msj:e,display:!0,error:n}),setTimeout((function(){R({msj:"Default msg",display:!1,error:!1})}),5e3)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{handleSearch:function(e){e.preventDefault(),N(e.target.value),""===e.target.value?U(!1):U(!0)},handleKeyUp:function(e){var n=a.filter((function(e){return e.name.match(new RegExp(C,"i"))}));T(n)},stringToSearch:C}),Object(s.jsx)("h2",{children:"Add a new entry"}),Object(s.jsx)(j,{noti:M}),Object(s.jsx)(h,{handleSubmit:function(e){if(e.preventDefault(),""!==l&&""!==y){var n={name:l,number:y};if(!1===a.some((function(e){return e.name===l})))x(n).then((function(e){w(""),m("")})).catch((function(e){return B("error at upload new person "+e,!0)})).finally((function(){O().then((function(e){c(e.data)})).catch((function(e){B("error at upload new person "+e,!0)})),B("".concat(n.name," is now added to the phonebook"),!1)}));else if(a.some((function(e){return e.number===y})))alert("".concat(y," is already on the phonebook"));else{if(window.confirm("Do you want to update ".concat(l," phonenumber"))){var t=a.filter((function(e){return e.name===l}));v(t[0].id,n).catch((function(e){return B("error at upload new person "+e,!0)})).then((function(e){B("".concat(l," number is already updated"),!0),c(a.map((function(n){return n.id!==t[0].id?n:e.data}))),m(""),w("")}))}}}else alert("All inputs need to be filled")},handleChange:function(e){"name"===e.target.name?m(e.target.value):w(e.target.value)},newName:l,newNumber:y}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{persons:a,searchedPhones:A,isSearching:K,handleClick:function(e){var n=!0,t=e.target.name;g(t).catch((function(e){B("error at removing entry. That entry doesnt exist",!0),n=!1,O().then((function(e){c(e.data)})).catch((function(e){B("error at upload new person "+e,!0)}))})).finally((function(){n&&(O().then((function(e){c(e.data)})).catch((function(e){B("error at upload new person "+e,!0)})),B("deleted sucesfully",!1))}))}})]})};i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(y,{persons:c})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.13fc7517.chunk.js.map