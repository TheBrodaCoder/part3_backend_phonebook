(this["webpackJsonppart2_phonebook_2.5_2.10"]=this["webpackJsonppart2_phonebook_2.5_2.10"]||[]).push([[0],{19:function(e,n,t){},3:function(e,n,t){var a=t(21),r="/api/persons";e.exports={getAll:function(){return a.get(r)},addPerson:function(e){return a.post(r,e)},popPerson:function(e){return a.delete("".concat(r,"/").concat(e))},updatePerson:function(e,n){return a.put("".concat(r,"/").concat(e),n)}}},40:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=[{name:"Arto Hellas",number:"040-123456"},{name:"Ada Lovelace",number:"39-44-5323523"},{name:"Dan Abramov",number:"12-43-234345"},{name:"Mary Poppendieck",number:"39-23-6423122"}],o=t(14),i=t.n(o),u=(t(19),t(4)),s=t(0),l=function(e){return Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{children:e.name}),Object(s.jsx)("td",{children:e.number}),Object(s.jsx)("td",{children:Object(s.jsx)("button",{name:e.id,onClick:e.handleClick,children:"Delete"})})]})},d=function(e){var n=e.persons,t=e.searchedPhones,a=e.isSearching,r=e.handleClick;return Object(s.jsx)("table",{children:Object(s.jsx)("tbody",{children:a?t.map((function(e){return Object(s.jsx)(l,{name:e.name,number:e.number,id:e.id,handleClick:r},"".concat(e.name,"_").concat(e.number))})):n.map((function(e){return Object(s.jsx)(l,{name:e.name,number:e.number,id:e.id,handleClick:r},"".concat(e.name,"_").concat(e.number))}))})})},b=function(e){return Object(s.jsxs)("div",{children:["filter shown with ",Object(s.jsx)("input",{type:"text",onChange:e.handleSearch,onKeyUp:e.handleKeyUp,value:e.stringToSearch,name:"strToSearch"})]})},h=function(e){return Object(s.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(s.jsxs)("div",{children:["name: ",Object(s.jsx)("input",{onChange:e.handleChange,value:e.newName,name:"name"}),"number: ",Object(s.jsx)("input",{onChange:e.handleChange,value:e.newNumber,name:"number"})]}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{type:"submit",children:"add"})})]})},m=function(e){var n=e.noti;return!1===n.display?null:Object(s.jsx)("div",{className:"Notification-block",style:{borderRadius:"0.5em",border:"solid 2px ".concat(n.error?"red":"green"),backgroundColor:"".concat(n.error?"#FD8181":"lightgreen"),display:"block",width:"300px",alignItems:"center"},children:Object(s.jsx)("p",{className:"Notification-text",style:{color:n.error?"red":"green",fontWeight:300,textAlign:"center"},children:n.msj})})},j=t(3),f=t.n(j),p=function(e){var n=Object(a.useState)([]),t=Object(u.a)(n,2),r=t[0],c=t[1],o=Object(a.useState)(""),i=Object(u.a)(o,2),l=i[0],j=i[1],p=Object(a.useState)(""),O=Object(u.a)(p,2),x=O[0],g=O[1],v=Object(a.useState)(""),y=Object(u.a)(v,2),w=y[0],S=y[1],k=Object(a.useState)([]),C=Object(u.a)(k,2),A=C[0],P=C[1],N=Object(a.useState)(!1),D=Object(u.a)(N,2),_=D[0],T=D[1],E=Object(a.useState)({msj:"Default msg",display:!1,error:!1}),K=Object(u.a)(E,2),R=K[0],U=K[1];Object(a.useEffect)((function(){f.a.getAll().then((function(e){c(e.data)})).catch((function(e){console.log("Cant resolve persons")}))}),[]);var I=function(e,n){U({msj:e,display:!0,error:n}),setTimeout((function(){U({msj:"Default msg",display:!1,error:!1})}),5e3)};return Object(s.jsxs)("div",{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(b,{handleSearch:function(e){e.preventDefault(),S(e.target.value),""===e.target.value?T(!1):T(!0)},handleKeyUp:function(e){var n=r.filter((function(e){return e.name.match(new RegExp(w,"i"))}));P(n)},stringToSearch:w}),Object(s.jsx)("h2",{children:"Add a new entry"}),Object(s.jsx)(m,{noti:R}),Object(s.jsx)(h,{handleSubmit:function(e){if(e.preventDefault(),""!==l&&""!==x){var n={name:l,number:x};if(!1===r.some((function(e){return e.name===l})))f.a.addPerson(n).then((function(e){g(""),j("")})).catch((function(e){return I("error at upload new person "+e,!0)})).finally((function(){f.a.getAll().then((function(e){c(e.data)})).catch((function(e){I("error at upload new person "+e,!0)})),I("".concat(n.name," is now added to the phonebook"),!1)}));else if(r.some((function(e){return e.number===x})))alert("".concat(x," is already on the phonebook"));else{if(window.confirm("Do you want to update ".concat(l," phonenumber"))){var t=r.filter((function(e){return e.name===l}));f.a.updatePerson(t[0].id,n).catch((function(e){return I("error at upload new person "+e,!0)})).then((function(e){I("".concat(l," number is already updated"),!1),c(r.map((function(n){return n.id!==t[0].id?n:e.data}))),j(""),g("")}))}}}else alert("All inputs need to be filled")},handleChange:function(e){"name"===e.target.name?j(e.target.value):g(e.target.value)},newName:l,newNumber:x}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(d,{persons:r,searchedPhones:A,isSearching:_,handleClick:function(e){var n=!0,t=e.target.name;f.a.popPerson(t).catch((function(e){I("error at removing entry. That entry doesnt exist",!0),n=!1,f.a.getAll().then((function(e){c(e.data)})).catch((function(e){I("error at upload new person "+e,!0)}))})).finally((function(){n&&(f.a.getAll().then((function(e){c(e.data)})).catch((function(e){I("error at upload new person "+e,!0)})),I("deleted sucesfully",!1))})).catch((function(e){I("Remember name must have at least 3 letter, and number must have atleast 8 numbers",!0)}))}})]})};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(p,{persons:c})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.08caaf9c.chunk.js.map